# Code Quality Dashboard

The Code Quality Dashboard is a comprehensive, web-based tool designed to provide an insightful overview of code quality metrics. By leveraging a BigQuery data source, it empowers developers, engineering managers, and QA engineers to visualize, analyze, and track the health of their codebase across multiple programming languages and product areas. The dashboard offers a hierarchical navigation system, allowing users to drill down from a high-level language summary to individual code samples, complete with detailed evaluations and actionable recommendations.

The application is built with a modern, full-stack architecture, featuring a lightweight Node.js backend and a dynamic, vanilla JavaScript frontend. It is designed for easy deployment on Google Cloud and includes robust features for filtering, sorting, and sharing specific views, making it an essential tool for maintaining high standards of code quality.

## ‚ú® Features

The dashboard is packed with features to make code quality analysis intuitive and efficient:

- **Hierarchical Navigation:** A three-panel layout guides users from a high-level language selection to specific product areas, and finally to individual code samples (represented as "region tags").
- **Language-Based Filtering:** The journey begins by selecting a programming language, which dynamically populates the dashboard with all associated product areas.
- **Product Category Filtering:** Users can further refine the list of products by selecting a specific product category from a dropdown menu, allowing for more focused analysis.
- **Advanced Sorting and Filtering:** Both product areas and region tags can be sorted by various criteria (name, sample count, score) and filtered by name in real-time, enabling users to quickly locate specific items.
- **In-Depth Analysis View:** The detail view for each code sample is rich with information, including:
    - An overall compliance score, color-coded for immediate visual feedback.
    - A detailed breakdown of evaluation criteria, with specific assessments and actionable recommendations.
    - Linked citations to external documentation and resources, embedded directly in the analysis text.
    - The complete, syntax-highlighted source code of the sample.
    - A summary of suggested fixes generated by a Large Language Model (LLM).
    - The Git history of the file, providing context on recent changes.
- **Deep Linking:** A "Copy Link" feature generates a direct URL to the current detail view, making it easy to share specific findings with team members for collaboration.
- **Diagnostic Information:** The application footer displays key configuration details, such as the Google Cloud Project ID and the BigQuery view being used, for easy reference.

## üèóÔ∏è Project Structure

The project is organized into a clean and modular structure, separating concerns between the backend, frontend, and documentation.

```
/
‚îú‚îÄ‚îÄ config/               # Backend configuration (e.g., environment variables)
‚îú‚îÄ‚îÄ docs/                 # Detailed project documentation (PRD, TDD, etc.)
‚îú‚îÄ‚îÄ routes/               # Backend API route definitions
‚îú‚îÄ‚îÄ services/             # Backend business logic (e.g., BigQuery interactions)
‚îú‚îÄ‚îÄ web/                  # Frontend assets (HTML, CSS, JavaScript)
‚îú‚îÄ‚îÄ __mocks__/            # Mock objects for testing
‚îú‚îÄ‚îÄ __tests__/            # Unit and integration tests
‚îú‚îÄ‚îÄ .github/              # GitHub Actions workflows for CI/CD
‚îú‚îÄ‚îÄ .env.sample           # Sample environment file for local setup
‚îú‚îÄ‚îÄ Dockerfile            # Docker configuration for containerization
‚îú‚îÄ‚îÄ package.json          # Project dependencies and scripts
‚îî‚îÄ‚îÄ server.js             # Main entry point for the backend server
```

## üöÄ Getting Started

Follow these steps to get the Code Quality Dashboard running on your local machine.

### Prerequisites

- **[Node.js](https://nodejs.org/)**: Version 20.x or higher.
- **Google Cloud Project**: A Google Cloud project with a BigQuery table containing the necessary code quality data.
- **[Google Cloud SDK](https://cloud.google.com/sdk/install)**: The `gcloud` command-line tool, for authentication.

### 1. Clone the Repository

First, clone the repository to your local machine:

```bash
git clone https://github.com/your-username/your-repository.git
cd your-repository
```

### 2. Create a `.env` File

The application uses a `.env` file for local configuration. Create one by copying the sample file:

```bash
cp .env.sample .env
```

Next, open the `.env` file and populate it with your specific Google Cloud project details:

```
# The port the server will listen on (optional, defaults to 8080).
PORT=8080

# Your Google Cloud Project ID.
PROJECT_ID=your-gcp-project-id

# The full BigQuery table or view ID to query against.
# Format: your-gcp-project-id.your_dataset.your_table_or_view
BIGQUERY_TABLE_ID=your-gcp-project-id.your_dataset.your_table_or_view
```

### 3. Authenticate with Google Cloud

The server uses Application Default Credentials (ADC) to securely authenticate with Google Cloud services. Run the following `gcloud` command to log in and set up your local credentials:

```bash
gcloud auth application-default login
```

### 4. Install Dependencies and Run

To ensure a consistent and reliable installation, use `npm ci` to install dependencies based on the `package-lock.json` file:

```bash
npm ci
```

You can then run the application in one of two modes:

- **Production Mode:** Starts the server using `node`.
    ```bash
    npm start
    ```
- **Development Mode:** Starts the server with `nodemon`, which automatically restarts the server on file changes.
    ```bash
    npm run dev
    ```

Once running, the application will be available at [http://localhost:8080](http://localhost:8080).

## üê≥ Docker

The project includes a `Dockerfile` for building a containerized version of the application.

### Build the Image

To build the Docker image, run the following command from the project root:

```bash
docker build -t code-quality-dashboard .
```

### Run the Container

When running the Docker container, you must provide the necessary environment variables. The easiest way to do this is with the `--env-file` flag, pointing to your `.env` file:

```bash
docker run -p 8080:8080 --env-file ./.env code-quality-dashboard
```

## ‚òÅÔ∏è Deployment

The application is designed for easy deployment to Google Cloud Run. For detailed, step-by-step instructions, please refer to the [Deployment Instructions](/docs/deployment_instructions.md) document.

## ‚úÖ Code Quality

To maintain a high standard of code quality, the project is configured with the following tools:

- **ESLint**: A static analysis tool to identify and fix problems in JavaScript code.
- **Prettier**: An opinionated code formatter to ensure a consistent code style.

You can run the following scripts to check and format the code:

- `npm run lint`: Check for linting errors.
- `npm run lint:fix`: Automatically fix any fixable linting errors.
  -- `npm run format`: Format the entire codebase with Prettier.
- `npm test`: Run the test suite using Jest.

## üìö Documentation

For more in-depth information about the project, please refer to the following documents in the [`docs`](/docs) directory:

- **[Product Requirements Document (PRD)](/docs/PRD.md):** An overview of the project's goals, features, and target audience.
- **[Technical Design Document (TDD)](/docs/TDD.md):** A detailed description of the project's architecture and technical design.
- **[Deployment Instructions](/docs/deployment_instructions.md):** Step-by-step instructions on how to deploy the application to Google Cloud.
