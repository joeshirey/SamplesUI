Deploying the Code Quality Dashboard to Cloud RunThis guide provides the steps to deploy the application using Google Cloud Build and Cloud Run.PrerequisitesGoogle Cloud SDK: You must have gcloud command-line tool installed and authenticated on your local machine.Project: You have a Google Cloud Project created, and the Project ID is readily available.Permissions: Your user account needs the necessary IAM permissions to manage Cloud Build, Artifact Registry, and Cloud Run. The Owner or Editor roles are sufficient, or a combination of Cloud Build Editor, Artifact Registry Administrator, Cloud Run Admin, and Service Account User for more granular control.One-Time Setup in Google CloudYou only need to perform these steps once for your project.1. Enable APIsLog in to your Google Cloud account and run the following command in your terminal to enable the necessary APIs for your project.gcloud services enable run.googleapis.com cloudbuild.googleapis.com artifactregistry.googleapis.com
2. Create an Artifact Registry RepositoryCloud Build requires a repository to store the Docker images it creates. This command creates a Docker repository named code-quality-repo in the us-central1 region.gcloud artifacts repositories create code-quality-repo \
    --repository-format=docker \
    --location=us-central1 \
    --description="Docker repository for Code Quality Dashboard"
3. Grant Cloud Build Access to Cloud RunBy default, the Cloud Build service account needs permission to deploy to Cloud Run and act as a Service Account User.PROJECT_NUMBER=$(gcloud projects describe $(gcloud config get-value project) --format='value(projectNumber)')
gcloud projects add-iam-policy-binding $(gcloud config get-value project) \
    --member="serviceAccount:$PROJECT_NUMBER@cloudbuild.gserviceaccount.com" \
    --role="roles/run.admin"

gcloud iam service-accounts add-iam-policy-binding \
    $PROJECT_NUMBER-compute@developer.gserviceaccount.com \
    --member="serviceAccount:$PROJECT_NUMBER@cloudbuild.gserviceaccount.com" \
    --role="roles/iam.serviceAccountUser"
Deployment ProcessOnce the one-time setup is complete, you can deploy your application from your project's root directory.1. Update cloudbuild.yamlOpen the cloudbuild.yaml file. In the final step, locate the --set-env-vars line and replace the placeholder values with your actual configuration values from your .env file.Example:BIGQUERY_TABLE_ID=my-gcp-project.my_dataset.my_metrics_table##PROJECT_ID=my-gcp-project-idImportant: The ^##^ is the special delimiter used by gcloud to separate multiple environment variables in a single line.2. Start the BuildFrom your project's root directory (the one containing cloudbuild.yaml), run the following command:gcloud builds submit --config cloudbuild.yaml .
This command will:Upload your entire project directory to Cloud Build.Execute the steps defined in your cloudbuild.yaml file.Build the Docker image and push it to your Artifact Registry.Deploy that image to your Cloud Run service named code-quality-dashboard.3. Access Your ApplicationAfter the build completes, the gcloud command will output the public URL for your newly deployed Cloud Run service. You can now access your live application!Future DeploymentsFor any future code changes, simply run the gcloud builds submit command again. Cloud Build will repeat the automated process and deploy a new version of your service with zero downtime.